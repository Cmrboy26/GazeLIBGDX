package net.cmr.gaze.world.interfaceTiles;

import java.util.LinkedList;

import net.cmr.gaze.inventory.Item;
import net.cmr.gaze.world.Tile;
import net.cmr.gaze.world.TileType;
import net.cmr.gaze.world.Tiles;

public interface ExploitableTile {
    
    public enum ExploitType {
        PUMP,
        DRILL;

        private TileType[] whitelistedTiles;

        ExploitType() {
            
        }

        public TileType[] getTileWhitelist() {
            if(whitelistedTiles == null) {
                LinkedList<TileType> tiles = new LinkedList<TileType>();
                for(TileType type : TileType.values()) {
                    Tile tile = Tiles.getTile(type);
                    if(tile instanceof ExploitableTile && ((ExploitableTile)tile).getExploitType() == this) {
                        tiles.add(type);
                    }
                }
                whitelistedTiles = tiles.toArray(new TileType[tiles.size()]);
            }
            return whitelistedTiles;
        }
    }

    public Item getExploitedItem();
    public ExploitType getExploitType();

}
